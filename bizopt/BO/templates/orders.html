{% extends "base.html" %}
{% block content %}

<body>
    <div class="uk-flex uk-flex-between uk-flex-middle uk-width-4-5" style="margin: 0 auto">
        <h1>Корзина</h1>
        <h3 class="uk-text-center uk-width-2-3">Здесь вы можете отследить статус текущих заказов</h3>
    </div>



    <div class="uk-width-4-5 uk-flex-column uk-margin-bottom" style="margin: 2% auto">        

            <form method="POST" class="uk-width-1">
                {% for product in products %}
                <div class="uk-flex uk-flex-between uk-flex-middle uk-with-1"
                    style="padding: 1%; margin: 2% auto; border-bottom: 1px solid;">
                    <div class="uk-flex uk-flex-around uk-flex-middle uk-width-3-5">
                        <div><img src="{{product.img}}" alt="" width="200px" style="border-radius: 5px">
                        </div>
                        <div class="uk-flex-row">
                            <h2 class="uk-text-break">{{ product.id_user_buy }}</h2>
                            <p style="font-size: 1.3em;" class="uk-text-break">Статус: <br> {{ product.status }}</p>
                        </div>
                    </div>
                    <div class="uk-flex uk-flex-around uk-flex-center uk-width-2-5">
                        <div class="uk-width-2-5">
                            <h3 class="uk-text-break" style="text-align: center">{{ product.price }} руб.</h3>
                            <p class="uk-text-break">Адрес: <br>{{product.delivery_address}}</p>
                        </div>
                        <div class="uk-width-auto">
                            <button class="uk-button uk-button-primary uk-border-rounded uk-width-1"
                                style="margin: 0 1%" type="button">Оплатить заказ</button>
                            <div class="uk-flex" style="margin-top: 5%">
                                {% csrf_token %}
                                <button class="uk-button uk-button-danger uk-border-rounded uk-width-auto"
                                    style="margin: 0 1%" name="decline" value="{{product.id}}"
                                    type="submit">Отказаться</button>
                                <a class="uk-button uk-button-primary uk-border-rounded uk-width-auto {{product.chat}}" id="cahtBtn"
                                    style="margin: 0 1%"  type="button">Чат</a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </form>
        </div>
    </div>
</body>

<script>
    const chatBtn = document.getElementById('cahtBtn')

    chatBtn.addEventListener('click', function()  {
        window.location.replace('/chats/')
        localStorage.setItem('activeChat', chatBtn.classList[chatBtn.classList.length - 1])
    })
</script>

<style>
    .checked {
        color: orange;
    }

    .rating-area {
        overflow: hidden;
        width: 265px;
        margin: 0 auto;
    }

    .rating-area:not(:checked)>input {
        display: none;
    }

    .rating-area:not(:checked)>label {
        float: right;
        width: 42px;
        padding: 0;
        cursor: pointer;
        font-size: 32px;
        line-height: 32px;
        color: lightgrey;
        text-shadow: 1px 1px #bbb;
    }

    .rating-area:not(:checked)>label:before {
        content: '★';
    }

    .rating-area>input:checked~label {
        color: gold;
        text-shadow: 1px 1px #c60;
    }

    .rating-area:not(:checked)>label:hover,
    .rating-area:not(:checked)>label:hover~label {
        color: gold;
    }

    .rating-area>input:checked+label:hover,
    .rating-area>input:checked+label:hover~label,
    .rating-area>input:checked~label:hover,
    .rating-area>input:checked~label:hover~label,
    .rating-area>label:hover~input:checked~label {
        color: gold;
        text-shadow: 1px 1px goldenrod;
    }

    .rate-area>label:active {
        position: relative;
    }
</style>


{% endblock %}