{% extends "base.html" %}

{% block content %}

<style>
    /* @import url('https://fonts.googleapis.com/css?family=Montserrat:400,800'); */
</style>

<body>
    <div style="width: 80%; margin-left: 10%">
        {% if shops  %}
        <form method="post">
            <div>
                <div class="uk-flex-column">
                    <div class="uk-flex" style="gap:2%">
                        <div>
                            <!-- <p style="font-weight: 600; font-size: 2.625em;">Корзина</p> -->
                            <h1 class="">Корзина</h1>
                        </div>
                        <p class="uk-text-bottom uk-margin-small-left">n товаров</p>
                    </div>

                    <div class="uk-width-1 uk-flex">
                        <div class="uk-width-3-4 uk-flex-column">
                            {% for shop in shops %}
                            <div class="uk-width-1 uk-border-rounded"
                                style="background-color: lightgrey; margin: 10px 0">
                                <p class="uk-margin-left" style="font-weight: 600; font-size: 1.5em; margin:0">Заказ <b
                                        class="uk-text-uppercase">{{shop}}</b>
                                </p>
                            </div>
                            {% for item in items %}
                            {% if item.brand == shop %}

                            <div class="uk-flex uk-margin">

                                <img src="{{item.img}}" width="80" alt="">

                                <div class="uk-flex uk-margin-medium-left">
                                    <div class="uk-grid-column-large" uk-grid-column>
                                        <div>
                                            <p style="font-weight: 600; font-size: 1.5em; margin-bottom: 0;">
                                                {{item.name}}
                                            </p>
                                            <p style="font-weight: 600; font-size: 1em; margin-top: 0;">{{item.brand}}
                                            </p>
                                        </div>
                                        <div>
                                            {% csrf_token %}
                                            <button class="uk-button uk-button-default" name="decline"
                                                value="{{item.id}}" type="submit" style="font-weight: 600; margin: 0;">
                                                <span uk-icon="icon: close;"></span>
                                                Удалить из корзины
                                            </button>
                                        </div>
                                    </div>
                                    <div class="uk-margin-large-left">
                                        <p style="font-weight: 600; font-size: 1.5em;">{{item.price}} р</p>
                                        <div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                            {% endfor %}
                            {% endfor %}
                        </div>


                        <div class="uk-width-1-4 uk-flex-column uk-margin-left">

                            <div>
                                <a class="uk-button uk-button-secondary uk-border-rounded uk-button-large uk-width-1"
                                    href="#submit-form" uk-toggle>
                                    Перейти к оформлению
                                </a>
                            </div>

                            <div class="uk-flex-column uk-border-rounded"
                                style="background-color: rgba(211, 211, 211, 0.482); height: 30vh">

                                <div class="uk-flex uk-margin-left uk-margin-top">
                                    <div class="uk-margin-top">
                                        <p style="font-weight: 600; font-size: 1.45em;">Итого</p>
                                        <p style="font-weight: 600; font-size: 1em; margin: 0">Всего n товара(ов)</p>
                                        <p style="font-weight: 600; font-size: 1em; margin: 0">Скидки</p>
                                    </div>
                                    <div class="uk-margin-top uk-margin-left">
                                        <p style="font-weight: 600; font-size: 1.45em;">{{sum}} р</p>
                                        <p style="font-weight: 600; font-size: 1em; margin: 0">{{sum}} р</p>
                                        <p style="font-weight: 600; font-size: 1em; margin: 0">0</p>
                                    </div>
                                </div>

                                <div class="uk-margin-left uk-margin-medium-top">
                                    <div>
                                        <div class="uk-flex">

                                            <input class="uk-input uk-width-3-4 uk-margin-remove" placeholder="промокод"
                                                type="text">
                                            <button
                                                class="uk-button uk-button-secondary uk-margin-right">применить</button>
                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>

                        <div id="submit-form" uk-modal>
                            <div class="uk-modal-dialog">
                                <div>
                                    <button class="uk-modal-close-default" type="button" uk-close></button>
                                </div>
                                <div class="uk-modal-header">
                                    <div style="margin-top: 2%">
                                        <h4 class="uk-text-center">Подтверждение оплаты</h4>
                                    </div>
                                </div>
                                <div class="uk-modal-body uk-margin-left uk-margin-right uk-margin-bottom"
                                    uk-overflow-auto style="padding: 0">
                                    <img>
                                    <div class="uk-flex">
                                        <p class="uk-margin-small-top">Оплата: </p>
                                        <p class="uk-margin-left uk-margin-small-top"> картой онлайн </p>
                                    </div>
                                    <div class="uk-flex">
                                        <p class="uk-margin-small-top">Адрес доставки:</p>
                                        <div class="uk-margin-left" style="width: 65%">
                                            <input class="uk-input" name="address" id="form-stacked-text" type="text"
                                                placeholder="г.Москва, Ленинградский проезд 111, кв 101, 100102">
                                            <p class="uk-text-meta uk-margin-remove" style="font-size: 12px">
                                                Вводите адрес в формате: "г. Город, улица, кв, почтовый индекc"
                                            </p>
                                        </div>
                                    </div>
                                    <p for="textarea">Пожелания к товару:</p>
                                    <textarea class="uk-textarea" name="message" id="" rows="5 "
                                        style="width: 100%;"></textarea>
                                </div>

                                <div class="uk-modal-footer uk-text-right">
                                    <button class="uk-button uk-button-default uk-modal-close"
                                        type="button">Закрыть</button>
                                    <form method="POST">
                                        {% csrf_token %}
                                        <button class="uk-button uk-button-primary" style="background-color: #B54F00;"
                                            name="payButton" type="submit">Заказать товар</button>
                                    </form>
                                </div>

                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </form>
        {% else %}

        <div>
            <div>
                <h1 style="font-weight: 600; font-size: 2.5em; text-align: center;">Сложите в корзину нужные товары</h1>
                <p style="font-weight: 600; font-size: 2em; text-align: center">А чтобы их найти, загляните в каталог
                </p>

            </div>
            <div style="width: 100%">
                <p class="uk-width-1-2 uk-text-center" style="font-weight: 600; font-size: 2.5em; margin: 0 auto;">Как
                    вам такие товары?</p>
                <div class="uk-grid-match uk-grid-medium uk-child-width-1-3" style="margin: 2% auto 0 auto" uk-grid>
                    {% for items in randProducts %}
                    {% for item in items %}
                    <div style="height: 45vh;">
                        <a class="uk-link-reset" href="/goods/{{item.id}}">

                            <div class="uk-height-medium uk-flex uk-flex-center uk-flex-middle uk-background-cover uk-light"
                                uk-img data-src="{{item.picture1}}"></div>
                            <div>
                                <p style="font-weight: 300; font-size: 18px;"
                                    class="uk-margin-small-left uk-margin-remove-bottom uk-text-truncate">
                                    {{item.description}}</p>
                                <p style="font-weight: 300; font-size: 16px;"
                                    class="uk-margin-small-left uk-margin-remove-top uk-margin-remove-bottom">
                                    {{item.show_price}} руб.</p>
                            </div>
                        </a>
                    </div>
                    {% endfor %}
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}

</body>

<script>
    $(document).ready(function () {
        $('.minus').click(function () {
            var $input = $(this).parent().find('input');
            var count = parseInt($input.val()) - 1;
            count = count < 1 ? 1 : count;
            $input.val(count);
            $input.change();
            return false;
        });
        $('.plus').click(function () {
            var $input = $(this).parent().find('input');
            $input.val(parseInt($input.val()) + 1);
            $input.change();
            return false;
        });
    });
</script>

{% endblock %}